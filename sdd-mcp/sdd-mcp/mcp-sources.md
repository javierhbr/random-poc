# MCP Sources — What Each Provides and When to Cite It

## Platform MCP

**Location:** `.specify/memory/constitution.md` (materialized as a file)

**Provides:**
- UX consistency standards and design system rules
- Security policies: PII handling, API boundary rules, data masking
- Observability standards: log format, metric naming, tracing requirements
- Performance baselines: p95 latency targets, throughput expectations
- Definition of Done
- NFR baselines

**Cite it in these spec sections:**
- User Experience → `Source: Platform MCP — UX guidelines v2.1`
- NFRs → `Source: Platform MCP — observability, security, performance v2.1`
- Observability → `Source: Platform MCP — logging/metrics/tracing standards v2.1`
- Goals → `Source: Platform MCP — Definition of Done v2.1`

---

## Domain MCP

**Location:** `.specify/memory/domains/<domain-name>.md`
(e.g., `domains/cart.md`, `domains/checkout.md`, `domains/payments.md`)

**Provides per domain:**
- Entity definitions and their valid states
- Business invariants (rules that must never be violated)
- Bounded context boundaries (what this domain owns vs. does not own)
- Owned events (what this domain emits)
- Cross-domain rules (what this domain must NOT do)

**Cite it in these spec sections:**
- Domain Understanding → `Source: Domain MCP — Cart invariants v1.4`
- Cross-Domain Interactions → `Source: Domain MCP — Cart + Checkout boundaries v1.4`
- Component Responsibilities → `Source: Domain MCP — ownership boundaries v1.4`

**Example invariants to look for:**
- "Cart owns session state; Checkout owns order state"
- "No domain may access another domain's database directly"
- "Guest session TTL must be ≥ 30 minutes after last activity"

---

## Integration MCP

**Location:** MCP Router / `.specify/memory/context-<initiative>.md` (contracts section)

**Provides:**
- Versioned API schemas (OpenAPI specs)
- Versioned event schemas (Kafka/event bus schemas)
- Consumer lists per contract (who depends on what)
- Compatibility rules: what counts as a breaking change
- Deprecation schedules

**Cite it in these spec sections:**
- Contracts → `Source: Integration MCP — CartUpdated v2 schema, consumers list v3.0`
- Cross-Domain Interactions → `Source: Integration MCP — OrderPlaced v3 consumers v3.0`

**When a contract change is needed:**
- Identify consumers from Integration MCP FIRST
- Design compatibility plan (dual-publish, field addition vs. removal)
- Create a Contract Change Spec in Platform Repo BEFORE implementation

---

## Component MCP

**Location:** `context/` directory in each Component Repo

**Provides:**
- Local architecture patterns and approved libraries
- Service constraints (tech stack, database type, message broker)
- Runbooks (how to deploy, rollback, monitor)
- Canonical examples of how things are done in this service
- Anti-patterns to avoid in this codebase

**Cite it in these spec sections:**
- Technical Approach → `Source: Component MCP — Cart service patterns v1.1`

---

## Context Pack

A Context Pack is the aggregated output of all MCPs for a specific initiative.
Generated by the MCP Router before each Platform Spec is written.

**Contains:**
- Platform policies (from Platform MCP)
- Domain invariants for all domains involved (from Domain MCPs)
- Active contracts for those domains (from Integration MCP)
- Component patterns for affected services (from Component MCPs)

**Format:** Single markdown file at `.specify/memory/context-<initiative-id>.md`

**Version:** Every Context Pack has a version (e.g., `cp-v2`). This version must be
pinned in every spec (`Context Pack: cp-v2`). If the Context Pack is regenerated
(e.g., after a policy change or after a Pause), the spec must rebaseline against the
new version.
